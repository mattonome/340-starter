<% if (messages && Object.keys(messages).length> 0) { %>
    <div id="flash-messages">
        <% Object.keys(messages).forEach(function(key) { // Ensure messages[key] is always an array const
            msgs=Array.isArray(messages[key]) ? messages[key] : [messages[key]]; // Map flash keys to CSS classes const
            typeClass=key==='success_msg' ? 'success' : key==='error_msg' ? 'error' : key; %>
            <% msgs.forEach(function(message) { %>
                <div class="flash-item <%= typeClass %>">
                    <span>
                        <%= message %>
                    </span>
                    <button class="close-btn" onclick="this.parentElement.remove()">Ã—</button>
                </div>
                <% }) %>
                    <% }) %>
    </div>
    <% } %>